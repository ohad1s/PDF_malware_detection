import joblib
import pandas as pd

from Feature_Extractor import Feature_Extractor
cols=my_list = ['FileName', 'PDFSize', 'MetadataSize', 'Pages', 'XrefLength', 'TitleCharacters',
                'IsEncrypted', 'EmbeddedFiles', 'Images', 'Text', 'Header', 'Obj',
                'EndObj', 'Stream', 'EndStream', 'Xref', 'Trailer', 'StartXref', 'PageNo', 'Encrypt',
                'ObjStm', 'JS', 'Javascript', 'AA', 'OpenAction', 'Acroform', 'JBIG2Decode', 'RichMedia',
                'Launch', 'EmbeddedFile', 'XFA', 'Colors']


class Run_Model():

    def __init__(self, file_path):
        self.file_path=file_path
        self.model=joblib.load('random_forest.pkl')

    def load_features(self):
        feature_extractor=Feature_Extractor(self.file_path)
        self.features_list= feature_extractor.main()
        self.df = pd.DataFrame(self.features_list, columns=cols)

    def main(self):
        self.load_features()
        print(self.features_list)
        prediction= self.model.predict(self.df)
        print("Predicted as: ",prediction)

rm= Run_Model("pdfs/JavaScriptClock.pdf")
rm.main()

